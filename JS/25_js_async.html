<!doctype html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async</title>

</head>
<body>
    <h4>Check Console</h4>
    <h3>1: Promises</h3>
    <h3>2: Async/Await</h3>

    <script>
        /* //Promises start
         console.log(`.... 1: Promises .....`);
        const promiseThing = new Promise( (resolve,reject) =>{
            const anyCondition = true;
            if(anyCondition){
                console.log('Promise Resolved1');
                resolve('Success1'); // push to then()
            }else{
                console.log('Promise Rejected1');
                reject('Rejected1'); // push to catch()
            }
        });

        promiseThing.then( (result)=> console.log(result))
            .catch( (error) => console.log(error))
            .finally(()=>console.log('Finally from 1'));

     //   function argumentedPromise(value){
            const storedPromise = new Promise( (resolve,reject) => {
                const value = 'hey'
                if(value==='hey'){
                    console.log('Promise Resolved2');
                    resolve('Succees2')
                }else{
                    console.log('Promise Rejected2');
                    reject('Rejected2')
                }
            });
           // return storedPromise;
       // }

        // const callReturnedPromise = argumentedPromise ('hey');
        //callReturnedPromise
        storedPromise.then( (result) => console.log(result) )
            .catch( (error) => console.log(error) )
            .finally( () => console.log('Finally from 2'));
        
            console.log(`.....................`);
   
    */ // promises end

    // async await

   async function getDataFromFakeAPI() {
    try {
        console.log('Loading Data....');
        const response = await fetch('https://shrimo.com/fake-api/todos');
        const data = await response.json();
        data.forEach(dataItem => {
            const output = `
                Id: ${dataItem._id}
                Title: ${dataItem.title}
                Description: ${dataItem.description}
                Due Date: ${dataItem.dueDate}
                Priority: ${dataItem.priority}
                Status: ${dataItem.status}
                Tags: ${dataItem.tags}
                Created At: ${dataItem.createdAt}
                Updated At: ${dataItem.updatedAt}
                Version: ${dataItem.__v}
            `;
            console.log(output);
        });
    } catch (error) {
        console.log("Something went wrong! " + error);
    }
}

getDataFromFakeAPI();
    </script>
</body>
</html>